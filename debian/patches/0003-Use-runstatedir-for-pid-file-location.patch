From: =?utf-8?b?T25kxZllaiBTdXLDvQ==?= <ondrej@sury.org>
Date: Tue, 19 Feb 2019 12:55:42 +0000
Subject: Use runstatedir for pid file location

---
 src/lib/process/Makefile.am | 4 +---
 src/lib/process/daemon.cc   | 2 +-
 2 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/src/lib/process/Makefile.am b/src/lib/process/Makefile.am
index 07f33de..3dd9298 100644
--- a/src/lib/process/Makefile.am
+++ b/src/lib/process/Makefile.am
@@ -1,8 +1,6 @@
 SUBDIRS = . testutils tests
-# DATA_DIR is the directory where to put PID files.
-dhcp_data_dir = @runstatedir@/@PACKAGE@
 AM_CPPFLAGS  = -I$(top_builddir)/src/lib -I$(top_srcdir)/src/lib
-AM_CPPFLAGS += -DDATA_DIR="\"$(dhcp_data_dir)\""
+AM_CPPFLAGS += -DKEA_PIDFILE_DIR="\"$(runstatedir)/$(PACKAGE_NAME)\""
 
 AM_CPPFLAGS += $(BOOST_INCLUDES)
 AM_CXXFLAGS  = $(KEA_CXXFLAGS)
diff --git a/src/lib/process/daemon.cc b/src/lib/process/daemon.cc
index 4ca5d0d..f465d1c 100644
--- a/src/lib/process/daemon.cc
+++ b/src/lib/process/daemon.cc
@@ -37,7 +37,7 @@ std::string Daemon::default_logger_name_("kea");
 
 Daemon::Daemon()
     : signal_set_(), signal_handler_(), config_file_(""),
-      pid_file_dir_(DATA_DIR), pid_file_(), am_file_author_(false) {
+      pid_file_dir_(KEA_PIDFILE_DIR), pid_file_(), am_file_author_(false) {
 
     // The pid_file_dir can be overridden via environment variable
     // This is primarily intended to simplify testing
